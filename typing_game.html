<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Typing Speed Game</title>
  <style>
    /* -----------------------------
       Typing Speed Game — Single File
       Save as index.html and open in browser
       ----------------------------- */

    :root{
      --bg1: #0f172a; /* deep navy */
      --bg2: #0b1020;
      --card: #0f172a88;
      --accent: linear-gradient(135deg,#ff7eb3 0%,#7afcff 100%);
      --glass: rgba(255,255,255,0.06);
      --muted: rgba(255,255,255,0.7);
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;color:#e6eef8}
    body{
      background: radial-gradient(1200px 600px at 10% 10%, #12203b 0%, transparent 15%),
                  radial-gradient(900px 500px at 90% 90%, #1b1630 0%, transparent 18%),
                  linear-gradient(180deg,var(--bg1),var(--bg2));
      display:flex;align-items:center;justify-content:center;padding:32px;
    }

    .wrap{width:100%;max-width:980px;margin:auto}

    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    .brand{display:flex;gap:14px;align-items:center}
    .logo{
      width:54px;height:54px;border-radius:12px;background:var(--accent);display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(122,252,255,0.08), inset 0 -4px 14px rgba(0,0,0,0.2)
    }
    .logo span{font-weight:800;color:#10202b;font-size:20px}
    h1{font-size:20px;margin:0}
    p.sub{margin:0;color:var(--muted);font-size:13px}

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius:16px;padding:20px;box-shadow:0 8px 30px rgba(2,6,23,0.6);backdrop-filter: blur(6px);border:1px solid rgba(255,255,255,0.04)
    }

    .grid{display:grid;grid-template-columns:1fr 320px;gap:20px}

    /* Left area */
    .left{padding:18px}
    .controls{display:flex;gap:12px;align-items:center;margin-bottom:12px}
    .btn{background:linear-gradient(90deg,#ff7eb3,#7afcff);padding:10px 14px;border-radius:10px;border:none;color:#07202a;font-weight:700;cursor:pointer;box-shadow:0 6px 20px rgba(122,252,255,0.08);}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:600}
    .select{background:var(--glass);padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);color:var(--muted)}

    .word-box{min-height:160px;padding:18px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px dashed rgba(255,255,255,0.03);display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .word{padding:8px 10px;border-radius:8px;font-weight:600}
    .word.current{background:linear-gradient(90deg,#ffffff11,#ffffff06);box-shadow:inset 0 -2px 6px rgba(0,0,0,0.25)}
    .word.right{color:#bdf7e4}
    .word.wrong{color:#ffd2d2;text-decoration:underline}

    .input-row{display:flex;gap:12px;align-items:center;margin-top:12px}
    #typeInput{flex:1;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.05);background:transparent;color:inherit;font-size:16px}
    .stats{display:flex;gap:12px;align-items:center}
    .stat{background:linear-gradient(180deg,#ffffff06,#ffffff02);padding:10px;border-radius:10px;min-width:76px;text-align:center}
    .stat strong{display:block;font-size:18px}
    .hint{font-size:13px;color:var(--muted);margin-top:8px}

    /* Right area */
    .right{padding:18px}
    .side-card{padding:14px;border-radius:12px;margin-bottom:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border:1px solid rgba(255,255,255,0.03)}
    .leader{display:flex;align-items:center;justify-content:space-between}
    .small{font-size:13px;color:var(--muted)}

    footer{margin-top:16px;color:var(--muted);font-size:13px;text-align:center}

    /* result overlay */
    .overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(2,6,23,0.6),rgba(2,6,23,0.85));backdrop-filter:blur(4px)}
    .modal{background:linear-gradient(90deg,#07202a,#042a2f);padding:26px;border-radius:16px;min-width:320px;text-align:center;box-shadow:0 30px 80px rgba(2,6,23,0.7)}
    .modal h2{margin:4px 0 8px}
    .modal .big{font-size:40px;font-weight:800}
    .share{display:flex;gap:8px;justify-content:center;margin-top:12px}

    /* responsive */
    @media (max-width:880px){
      .grid{grid-template-columns:1fr;}
      .right{order:2}
    }

    /* playful tiny animation */
    .pulse{animation:pulse 1.6s infinite}
    @keyframes pulse{0%{transform:translateY(0)}50%{transform:translateY(-4px)}100%{transform:translateY(0)}}

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo"><span>TS</span></div>
        <div>
          <h1>Typing Speed Arcade</h1>
          <p class="sub">Type quickly — test accuracy — beat your score ✨</p>
        </div>
      </div>
      <div class="card" style="display:flex;gap:12px;align-items:center">
        <div style="text-align:right">
          <div style="font-weight:700">Ready to type?</div>
          <div class="small">Choose your session time</div>
        </div>
      </div>
    </header>

    <div class="grid">
      <div class="card left">
        <div class="controls">
          <button id="startBtn" class="btn">Start</button>
          <button id="resetBtn" class="btn secondary">Reset</button>

          <select id="timeSelect" class="select">
            <option value="15">15 sec</option>
            <option value="30">30 sec</option>
            <option value="60" selected>60 sec</option>
            <option value="120">120 sec</option>
          </select>

          <div style="flex:1"></div>

          <div class="small">Theme</div>
          <button id="themeBtn" class="btn secondary">Toggle</button>
        </div>

        <div class="word-box" id="wordBox" aria-live="polite"></div>

        <div class="input-row">
          <input id="typeInput" autocomplete="off" placeholder="Start typing here..." disabled />
          <div class="stats">
            <div class="stat">
              <div class="small">WPM</div>
              <strong id="wpm">0</strong>
            </div>
            <div class="stat">
              <div class="small">Accuracy</div>
              <strong id="acc">100%</strong>
            </div>
            <div class="stat">
              <div class="small">Time</div>
              <strong id="time">60</strong>
            </div>
          </div>
        </div>

        <p class="hint">Tip: Press <strong>Start</strong> or begin typing to start the timer. Try to minimize mistakes — accuracy matters!</p>
      </div>

      <aside class="card right">
        <div class="side-card">
          <div class="leader">
            <div>
              <div style="font-weight:800;font-size:18px">Session</div>
              <div class="small">Words are pulled randomly — improve consistency</div>
            </div>
            <div style="text-align:right">
              <div class="small">Best</div>
              <div style="font-weight:700;font-size:18px" id="bestScore">—</div>
            </div>
          </div>
        </div>

        <div class="side-card">
          <div style="font-weight:700">Stats Breakdown</div>
          <div style="display:flex;gap:10px;margin-top:10px">
            <div style="flex:1">
              <div class="small">Correct chars</div>
              <div id="correctChars">0</div>
            </div>
            <div style="flex:1">
              <div class="small">Errors</div>
              <div id="errors">0</div>
            </div>
          </div>
        </div>

        <div class="side-card">
          <div style="font-weight:700">How to play</div>
          <ul class="small" style="margin:8px 0 0;padding-left:18px;color:var(--muted)">
            <li>Choose time, press Start, and type the words shown.</li>
            <li>Correct words turn green. Mistakes are highlighted.</li>
            <li>WPM updates live — accuracy is shown too.</li>
          </ul>
        </div>

        <footer>Made with ❤️ by your coding buddy</footer>
      </aside>
    </div>
  </div>

  <!-- result overlay -->
  <div class="overlay" id="overlay">
    <div class="modal" role="dialog" aria-modal="true">
      <h2>Time's up!</h2>
      <div class="big" id="finalWpm">0 WPM</div>
      <div style="margin-top:8px" id="finalStats"></div>
      <div class="share">
        <button class="btn" id="retry">Play Again</button>
        <button class="btn secondary" id="closeRes">Close</button>
      </div>
    </div>
  </div>

  <script>
    // Minimal but polished typing game logic
    const words = (`
    apple banana orange mango lemon grape peach cherry strawberry watermelon kiwi pineapple plum apricot pear
    table chair lamp pillow blanket bottle laptop phone camera notebook pencil marker eraser clock calendar
    rocket planet comet galaxy star moon sun ocean river mountain valley desert island forest canyon
    jazz melody rhythm harmony singer trumpet piano violin guitar drum cello saxophone
    `).trim().split(/\s+/);

    // expand list by mixing
    while(words.length < 300) words.push(...words.slice(0,50));

    const wordBox = document.getElementById('wordBox');
    const typeInput = document.getElementById('typeInput');
    const startBtn = document.getElementById('startBtn');
    const resetBtn = document.getElementById('resetBtn');
    const timeSelect = document.getElementById('timeSelect');
    const wpmEl = document.getElementById('wpm');
    const accEl = document.getElementById('acc');
    const timeEl = document.getElementById('time');
    const overlay = document.getElementById('overlay');
    const finalWpm = document.getElementById('finalWpm');
    const finalStats = document.getElementById('finalStats');
    const retry = document.getElementById('retry');
    const closeRes = document.getElementById('closeRes');
    const bestScoreEl = document.getElementById('bestScore');
    const correctCharsEl = document.getElementById('correctChars');
    const errorsEl = document.getElementById('errors');

    let sessionWords = [];
    let currentIndex = 0;
    let timer = null;
    let timeLeft = parseInt(timeSelect.value,10);
    let totalTime = timeLeft;
    let started = false;
    let correctChars = 0;
    let errors = 0;
    let totalKeystrokes = 0;

    function pickWords(){
      sessionWords = [];
      for(let i=0;i<80;i++){
        sessionWords.push(words[Math.floor(Math.random()*words.length)]);
      }
    }

    function renderWords(){
      wordBox.innerHTML = '';
      sessionWords.forEach((w,i)=>{
        const span = document.createElement('span');
        span.className = 'word';
        span.textContent = w;
        if(i===0) span.classList.add('current');
        wordBox.appendChild(span);
      });
    }

    function resetAll(){
      clearInterval(timer);
      timeLeft = parseInt(timeSelect.value,10);
      totalTime = timeLeft;
      currentIndex = 0;
      started = false;
      correctChars = 0; errors = 0; totalKeystrokes = 0;
      pickWords(); renderWords();
      typeInput.value = '';
      typeInput.disabled = false; // keep enabled but not auto-start
      updateStats();
      timeEl.textContent = timeLeft;
      overlay.style.display = 'none';
      startBtn.disabled = false;
    }

    function updateStats(){
      const minutesPassed = (totalTime - timeLeft)/60 || 0.000001;
      const wpm = minutesPassed>0 ? Math.round((correctChars/5)/minutesPassed) : 0;
      const accuracy = totalKeystrokes>0 ? Math.max(0, Math.round((1 - (errors/totalKeystrokes))*100)) : 100;
      wpmEl.textContent = wpm;
      accEl.textContent = accuracy + '%';
      correctCharsEl.textContent = correctChars;
      errorsEl.textContent = errors;
    }

    function startTimer(){
      if(timer) clearInterval(timer);
      timer = setInterval(()=>{
        timeLeft -= 1;
        timeEl.textContent = timeLeft;
        updateStats();
        if(timeLeft<=0){
          endSession();
        }
      },1000);
    }

    function endSession(){
      clearInterval(timer);
      typeInput.disabled = true;
      started = false;
      // final calculations
      const minutes = totalTime/60;
      const finalWPM = Math.round((correctChars/5)/minutes);
      const accuracy = totalKeystrokes>0 ? Math.max(0, Math.round((1 - (errors/totalKeystrokes))*100)) : 100;
      finalWpm.textContent = finalWPM + ' WPM';
      finalStats.innerHTML = `<div style="margin-top:8px">Accuracy: <strong>${accuracy}%</strong> &nbsp; • &nbsp; Correct chars: <strong>${correctChars}</strong> &nbsp; • &nbsp; Errors: <strong>${errors}</strong></div>`;
      overlay.style.display = 'flex';

      // best score save
      const key = 'ts_best_' + totalTime;
      const prev = parseInt(localStorage.getItem(key) || '0',10);
      if(finalWPM>prev) localStorage.setItem(key, finalWPM);
      bestScoreEl.textContent = localStorage.getItem(key) || finalWPM;
      startBtn.disabled = false;
    }

    // input handling
    typeInput.addEventListener('input', (e)=>{
      const val = e.target.value;
      if(!started){
        started = true;
        startTimer();
      }
      // handle space or full match
      const currentWord = sessionWords[currentIndex];
      totalKeystrokes += 1;

      if(val.endsWith(' ')){
        const trimmed = val.trim();
        if(trimmed === currentWord){
          // correct word
          const span = wordBox.children[currentIndex];
          span.classList.add('right');
          correctChars += currentWord.length + 1; // include space
        } else {
          const span = wordBox.children[currentIndex];
          span.classList.add('wrong');
          errors += Math.abs(currentWord.length - trimmed.length) + 1; // rough
        }
        // move on
        currentIndex += 1;
        // mark next
        if(wordBox.children[currentIndex]){
          for(const s of wordBox.children) s.classList.remove('current');
          wordBox.children[currentIndex].classList.add('current');
        }
        typeInput.value = '';
      } else {
        // live compare with prefix
        const span = wordBox.children[currentIndex];
        const typed = val;
        // if typed is prefix of currentWord -> OK
        if(currentWord.startsWith(typed)){
          span.classList.remove('wrong');
          span.classList.add('current');
        } else {
          span.classList.add('wrong');
        }
      }
      updateStats();
    });

    startBtn.addEventListener('click',(e)=>{
      resetAll();
      startBtn.disabled = true;
      typeInput.focus();
      // small delay to ensure focus
      setTimeout(()=>{ if(!started){ started = true; startTimer(); } }, 300);
    });

    resetBtn.addEventListener('click',(e)=>{
      resetAll();
      typeInput.focus();
    });

    retry.addEventListener('click', ()=>{ resetAll(); overlay.style.display='none'; typeInput.focus(); });
    closeRes.addEventListener('click', ()=>{ overlay.style.display='none'; });

    timeSelect.addEventListener('change', ()=>{
      timeLeft = parseInt(timeSelect.value,10);
      totalTime = timeLeft;
      timeEl.textContent = timeLeft;
      // refresh best score display for selected time
      const key = 'ts_best_' + totalTime;
      bestScoreEl.textContent = localStorage.getItem(key) || '—';
    });

    // theme toggle (simple) — just invert accent for fun
    const themeBtn = document.getElementById('themeBtn');
    themeBtn.addEventListener('click', ()=>{
      document.body.style.background = document.body.style.background ? '' : 'linear-gradient(180deg,#0b1220,#071826)';
    });

    // init
    pickWords(); renderWords();
    timeEl.textContent = timeLeft;
    bestScoreEl.textContent = localStorage.getItem('ts_best_' + timeLeft) || '—';
    updateStats();

    // small accessibility: pressing Enter in input triggers space behaviour
    typeInput.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter'){
        e.preventDefault();
        typeInput.value = typeInput.value + ' ';
        const ev = new Event('input', {bubbles:true});
        typeInput.dispatchEvent(ev);
      }
    });

  </script>
</body>
</html>
